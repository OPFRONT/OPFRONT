function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _this=this,_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),PATH_NAMES={en:"en.html",fr:""},FR_LANG="fr",EN_LANG="en",LANG_COOKIE="of-lang",locationPath=location.pathname.substring(0,location.pathname.lastIndexOf("/")),originUrl=""+location.origin+locationPath,_redirectIfNecessary=function(e){var t=location.pathname.indexOf(PATH_NAMES[EN_LANG])!==-1?EN_LANG:FR_LANG,n=void 0!==PATH_NAMES[e]?e:EN_LANG;n!==t&&location.replace(originUrl+"/"+PATH_NAMES[n])},langCookie=Cookies.get(LANG_COOKIE);if(langCookie)_redirectIfNecessary(langCookie);else{var userLang=navigator.language||navigator.browserLanguage;userLang.indexOf(EN_LANG)!==-1&&(userLang=EN_LANG),_redirectIfNecessary(userLang)}for(var CONTACT_FORM_EVENT="Contact form sent",SUBSCRIBE_FORM_EVENT="Subscribe form sent",inputs=document.querySelectorAll("input,textarea,select"),_loop=function(e){var t=inputs[e];t.addEventListener("blur",function(e){t.value?t.classList.add("filled"):t.classList.remove("filled")})},i=0;i<inputs.length;i++)_loop(i);var _getFormValuesObject=function(e){for(var t=e.querySelectorAll("input,textarea,select"),n={},o=0;o<t.length;o++){var a=t[o];n[a.name]=a.value,a.value=""}return n},_addUserAsLead=function(e){var t={firstName:e.firstname,lastName:e.lastname,email:e.email,phone:e.phone,createdAt:(new Date).toISOString(),company:{name:e.company,website:e.website},website:e.website};console.log(t)};document.getElementById("contact-us-form").addEventListener("submit",function(e){var t=e.target;e.preventDefault(),document.querySelector("#contact .thanks").classList.add("active"),t.querySelector('.btn[type="submit"]').setAttribute("disabled",!0);var n=_getFormValuesObject(e.target),o=n.firstname+" "+n.lastname+" ("+n.email+") asks for contact on website.\n message: "+n.message;sendMessageToSlack(o),analytics.track(CONTACT_FORM_EVENT,n)}),document.getElementById("subscribe-form").addEventListener("submit",function(e){var t=e.target;e.preventDefault();var n=_getFormValuesObject(t);analytics.track(SUBSCRIBE_FORM_EVENT,n),_addUserAsLead(n);var o=n.firstname+" "+n.lastname+" ("+n.email+") just subscribed.";for(var a in n)o+="\n "+a+" : "+n[a];sendMessageToSlack(o),document.getElementById("thanks").classList.add("active")});var GET_STARTED_ANIMATION_DURATION=600;$(".btn.get-started").click(function(e){$("#get-started").addClass("active")});var closeGetStarted=function(){var e=$("#get-started.active, #thanks.active, #choose-solution.active, #subscribe.active, #webstore.active");return e.length>0&&($("#thanks.active, #choose-solution.active, #subscribe.active, #webstore.active").addClass("closing"),$("#get-started").removeClass("active"),window.setTimeout(function(){$("#thanks, #choose-solution, #subscribe, #webstore").removeClass("active")},GET_STARTED_ANIMATION_DURATION),window.setTimeout(function(){$("#thanks, #choose-solution, #subscribe, #webstore").removeClass("closing")},3*GET_STARTED_ANIMATION_DURATION),!0)};$("#get-started .navigation-control.previous").click(function(e){$("#get-started, .btn.get-started").removeClass("active")}),$("#complete-solution .choose .btn").click(function(e){$("#choose-solution").addClass("active")}),$("#choose-solution .navigation-control.previous").click(function(e){$("#choose-solution").removeClass("active")}),$("#choose-solution .choose .btn").click(function(e){$("#subscribe").addClass("active")}),$("#subscribe .navigation-control.previous").click(function(e){$("#subscribe").removeClass("active")}),$("#store-solution").click(function(e){$("#subscribe").addClass("active")}),$("#webstore .navigation-control.previous").click(function(e){$("#webstore").removeClass("active")}),$("#thanks .navigation-control.previous").click(function(e){closeGetStarted()});var timeout="localhost"===location.hostname||"127.0.0.1"===location.hostname?0:2e3;window.setTimeout(function(){$("#page-loader").addClass("fadeOut")},timeout);var BG_IMAGE_FILENAMES=["OP_Image01","OP_Image02","OP_Image03","OP_Image04"],TABLET_MAX_WIDTH=1024,isMobile=window.innerWidth<=TABLET_MAX_WIDTH,setRandomBackgroundImage=function(){var e=BG_IMAGE_FILENAMES[Math.floor(Math.random()*BG_IMAGE_FILENAMES.length)],t="background-image: url("+originUrl+"/dist/img/"+e+(isMobile?"small":"")+".jpg)";document.getElementById("header").setAttribute("style",t)};setRandomBackgroundImage();var Menu=function(){function e(){_classCallCheck(this,e),this.topMenu=$("nav .menu"),this.menuItems=this.topMenu.find(".menu-item"),this.lastSectionId="",this._bindMenuItemsClick(),this.menuItems.click(this.handleMenuItemClick)}return _createClass(e,[{key:"_bindMenuItemsClick",value:function(){$(".menu-btn").click(function(){$("nav").toggleClass("opened")}),$("nav .lang .en").click(function(){$("nav .lang").removeClass(FR_LANG),$("nav .lang").addClass(EN_LANG),Cookies.set(LANG_COOKIE,EN_LANG)}),$("nav .lang .fr").click(function(){$("nav .lang").removeClass(EN_LANG),$("nav .lang").addClass(FR_LANG),Cookies.set(LANG_COOKIE,FR_LANG)}),$("nav .nav-logo").click(function(){closeGetStarted(),$("nav").removeClass("opened"),$(window).scrollTop()})}},{key:"_markMenuItemAsActive",value:function(e){this.menuItems.removeClass("active"),this.topMenu.find('.menu-item[href="'+e+'"]').addClass("active")}},{key:"handleMenuItemClick",value:function(e){var t=$(e.currentTarget).attr("href"),n=getSectionOffset(t),o=closeGetStarted(),a=$("nav.opened").length>0;$("nav").removeClass("opened"),window.setTimeout(function(){$("html, body").stop().animate({scrollTop:n},GET_STARTED_ANIMATION_DURATION)},o||a?GET_STARTED_ANIMATION_DURATION:0),e.preventDefault()}},{key:"onScroll",value:function(e){var t=getCurrentSectionId(e);this.lastSectionId!==t&&(this._markMenuItemAsActive(t),this.lastSectionId=t)}}]),e}(),PageControls=function(){function e(){_classCallCheck(this,e),this.previousPageControl=$(".page-controls .previous"),this.nextPageControl=$(".page-controls .next"),this.pageControls=$([this.nextPageControl[0],this.previousPageControl[0]]),this.pageControls.click(this.handlePageControlClick)}return _createClass(e,[{key:"handlePageControlClick",value:function(e){var t=$(window).scrollTop(),n=$(e.currentTarget).hasClass("previous")?-1:1,o=getAdjacentSectionId(t,n),a=getSectionOffset(o);$("html, body").stop().animate({scrollTop:a},300)}},{key:"onScroll",value:function(e){e<getFirstSectionOffset()?this.previousPageControl.removeClass("active"):this.previousPageControl.addClass("active"),e>=getLastSectionOffset()?this.nextPageControl.removeClass("active"):this.nextPageControl.addClass("active"),e>$(".page-controls .next").height()?this.nextPageControl.removeClass("white"):this.nextPageControl.addClass("white")}}]),e}(),Parallax=function(){function e(){_classCallCheck(this,e),this.prisms=[{ele:$("#teal-stick"),initialPosition:$("#teal-stick").css("top"),move:125},{ele:$("#black-stick"),initialPosition:$("#black-stick").css("top"),move:-280},{ele:$("#red-stick"),initialPosition:$("#red-stick").css("top"),move:-200}],this._documentHeight=void 0!==document.height?document.height:document.body.offsetHeight}return _createClass(e,[{key:"onScroll",value:function(e){for(var t=e/this._documentHeight,n=0;n<this.prisms.length;n++){var o=this.prisms[n];o.ele.css("top","calc("+o.initialPosition+" + "+t*o.move+"px)")}}}]),e}(),SECTION_IDS=["#header"].concat(_toConsumableArray($("nav .menu .menu-item").map(function(e,t){return $(t).attr("href")}))),menu=new Menu,parallax=new Parallax,pageControls=new PageControls;$(window).scroll(function(){var e=$(_this).scrollTop();menu.onScroll(e),parallax.onScroll(e),pageControls.onScroll(e)});for(var getSectionOffset=function(e){return parseInt($(e).offset().top,10)},getFirstSectionOffset=function(){return getSectionOffset(SECTION_IDS[1])},getLastSectionOffset=function(){return getSectionOffset(SECTION_IDS[SECTION_IDS.length-1])},getCurrentSectionId=function(e){var t=void 0;return SECTION_IDS.map(function(n){getSectionOffset(n)<=e&&(t=n)}),t},getAdjacentSectionId=function(e,t){var n=void 0;return SECTION_IDS.map(function(t,o){getSectionOffset(t)<=e&&(n=o)}),SECTION_IDS[n+t]},SLACK_SUPPORT_WEBHOOK_URL="https://hooks.slack.com/services/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",sendMessageToSlack=function(e){var t=JSON.stringify({text:e}),n=new XMLHttpRequest;n.open("POST",SLACK_SUPPORT_WEBHOOK_URL),n.send(t)},TRACK_CLICKS_ATTRIBUTE_NAME="track-click",elementsToTrack=document.querySelectorAll("["+TRACK_CLICKS_ATTRIBUTE_NAME+"]"),trackClick=function(e){var t=e.target.id;t&&analytics.track("Clicked on "+t)},_i3=0;_i3<elementsToTrack.length;_i3++)elementsToTrack[_i3].addEventListener("click",trackClick);